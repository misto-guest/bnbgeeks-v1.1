#!/bin/bash

# Get the directory where this script is located
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$SCRIPT_DIR/../.."

# Check if node_modules exists
if [ ! -d "node_modules" ]; then
    echo "üì¶ Installing dependencies (first time only)..."
    npm install --silent
    echo ""
fi

echo "üñ•Ô∏è  Legiit Automation Dashboard"
echo "================================"
echo ""
echo "üì° Opening dashboard in your browser..."
echo ""

# Start the setup server in background
npm run setup &

# Get the PID
SERVER_PID=$!

# Wait a moment for server to start
sleep 2

# Open browser
open http://localhost:8080

echo "‚úÖ Dashboard is running!"
echo ""
echo "üì± URL: http://localhost:8080"
echo ""
echo "Press Ctrl+C to stop the dashboard"
echo ""

# Wait for server process
wait $SERVER_PID
