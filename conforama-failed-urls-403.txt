# Conforama URLs with 403 errors - Generated: 2026-02-10
# These URLs failed to fetch due to anti-bot protection
# Total: 73 URLs estimated (all Conforama.fr marketplace URLs)
# Retry strategy: Use browser automation (Puppeteer) with realistic delays

## ANALYSIS SUMMARY

### Why 403 Errors Occurred
Conforama.fr implements strong anti-bot protection that blocks direct HTTP requests:

1. **Anti-Bot Detection System:**
   - Conforama.fr likely uses Cloudflare or similar Web Application Firewall (WAF)
   - Detects Python requests library via TLS fingerprinting
   - Checks for JavaScript execution capabilities
   - Analyzes request headers and patterns

2. **Why Basic Requests Failed:**
   - User-Agent header alone is insufficient
   - Missing browser fingerprints (Canvas, WebGL, AudioContext)
   - No JavaScript execution environment
   - Automated request patterns detected

3. **Rate Limiting Status:**
   - Rate limiting WAS implemented correctly (5 req/s, 1s delays)
   - Rate limiting was NOT the cause of 403 errors
   - The anti-bot system blocks based on request characteristics, not frequency

### What Worked (Workaround)
- Extracted 19 emails from serper.dev API search result snippets
- Snippet extraction bypassed page fetching entirely
- All emails came from search snippets, not full page content

### URLs That Failed (Estimated List)
Since the original run didn't log specific 403 URLs, all marketplace URLs from the search would have failed:

# Sample marketplace URLs (these would have returned 403):
https://www.conforama.fr/marchand/vive-le-meuble
https://www.conforama.fr/marchand/homavo-store
https://www.conforama.fr/marchand/homyfrance
https://www.conforama.fr/marchand/mso
https://www.conforama.fr/marchand/sommeil-de-plomb
https://www.conforama.fr/marchand/redom
https://www.conforama.fr/marchand/finesse-domestique
https://www.conforama.fr/marchand/komhtom
https://www.conforama.fr/marchand/stilvora
https://www.conforama.fr/marchand/coin-confort
https://www.conforama.fr/marchand/sweiko
https://www.conforama.fr/marchand/zerbaco
https://www.conforama.fr/marchand/2kings
https://www.conforama.fr/marchand/home-equipement
https://www.conforama.fr/marchand/touar-shop
https://www.conforama.fr/marchand/homifab-fabia

## RECOMMENDATIONS FOR TOMORROW

### Strategy 1: Browser Automation (Recommended)
```python
# Use Puppeteer or Playwright with realistic browser behavior
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=True)
    context = browser.new_context(
        user_agent='Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
        viewport={'width': 1920, 'height': 1080}
    )
    page = context.new_page()
    
    # Add realistic delays
    page.goto(url, wait_until='networkidle')
    page.wait_for_timeout(2000 + random.randint(1000, 3000))
```

### Strategy 2: Rotate User Agents
```python
USER_AGENTS = [
    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
    'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
    'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36'
]
```

### Strategy 3: Slower Pace (If Using API)
- Increase delays to 3-5 seconds between requests
- Add random jitter (Â±1-2 seconds)
- Respect robots.txt strictly

### Strategy 4: Continue Using Serper.dev (Best Results)
The current approach using serper.dev snippets was successful:
- 19 emails extracted from 73 URLs
- No 403 errors (bypassed page fetching entirely)
- Minimal API usage
- Consider expanding search queries for more coverage

## TECHNICAL DETAILS

### Current Implementation Issues:
1. Using `requests` library (easily detected)
2. Static User-Agent header
3. No browser fingerprint simulation
4. Linear request patterns (even with delays)

### Conforama.fr Anti-Bot Triggers:
- TLS fingerprint mismatch (Python vs Chrome)
- Missing Accept-Language/Accept-Encoding headers
- No JavaScript execution
- Request timing patterns
- HTTP/1.1 vs HTTP/2 differences

### What Tomorrow's Run Should Do:
1. **Option A (Browser):** Puppeteer/Playwright with full browser simulation
2. **Option B (API):** Expand serper.dev queries (current working approach)
3. **Option C (Hybrid):** Use API to find URLs, browser to fetch content

## EMAILS FOUND (Via Snippet Extraction - No 403s)
Total: 19 unique emails from French marketplace
- All extracted from serper.dev search result snippets
- Spanish site: No marketplace structure found

For the complete email list, see: conforama-fr-emails.csv
